<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport", content="width=device-width, initial-scale=1.0">
        <title>Custom Snake Game</title>
        <link rel="stylesheet" href="snakeEASY.css">
        <script src="snakeEASY.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Tiny5&display=swap" rel="stylesheet">
        <audio id="eatSound" src="/Sounds/AppleEatNoise.mp3" preload="auto"></audio>
        <audio id="bgMusic" src="/Sounds/BackgroundMusic.mp3" loop preload="auto"></audio>
        <audio id="bgMusic" loop>
            <source src="Sounds/BackgroundMusic.mp3" type="audio/mpeg">
        </audio>
    </head>
    <script>
    // Game page sound initialization
    document.addEventListener('DOMContentLoaded', function() {
        // Set up background music according to saved preference
        const bgMusic = document.getElementById('bgMusic');
        if (bgMusic) {
            bgMusic.volume = 0.5;
            bgMusic.muted = localStorage.getItem('musicEnabled') === 'false';
            if (!bgMusic.muted) {
                bgMusic.play().catch(() => {
                    // Handle autoplay restrictions
                    document.addEventListener('click', function startMusic() {
                        if (localStorage.getItem('musicEnabled') !== 'false') {
                            bgMusic.play();
                        }
                        document.removeEventListener('click', startMusic);
                    }, { once: true });
                });
            }
        }
    });

    // Universal sound function for game pages
    function playGameSound(soundId) {
        if (localStorage.getItem('sfxEnabled') !== 'false') {
            const sound = document.getElementById(soundId);
            if (sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log("Sound error:", e));
            }
        }
    }
    </script>
    <body>
    <canvas id="board" oncontextmenu="return false"></canvas>
    <div id="scoreboard"><p>Score: <span id="score">1</span></p></div>
    <div id="highscore"><img id="bronzeTrophy" src="/Pop-Ups/Bronze.png"><span id="highscoreValue">1</span></div>
    <div id="gameOverPopup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; text-align: center;">
        <a draggable="false">
            <img id="gameOverImage" src="game-over.png" 
                style="position: absolute; 
                 top: 41%; 
                        left: 50%; 
                        transform: translate(-50%, -50%) scale(0.98); /* 20% stretch in ALL directions */
                        width: auto;
                        height: auto;
                        max-width: 100%;  /* Increased to accommodate stretch */
                        max-height: 100%;
                        object-fit: contain;"
                        oncontextmenu="return false">
        </a>
        <img id="replayButton" src="/Pop-Ups/Replay.png" 
         style="position: absolute; 
                top: 70%; 
                left: 65%; 
                transform: translateX(-50%);
                cursor: pointer;
                z-index: 101;"
         oncontextmenu="return false">
         <a href="menu.html">
            <img id="menuButton" src="/Pop-Ups/Menu.png" oncontextmenu="return false">
         </a>
    </div>
    </body>
</html>